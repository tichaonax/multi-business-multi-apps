# Multi-Business Management Platform - Environment Configuration
# Copy this file to .env and update the values for your environment

# ================================
# DATABASE CONFIGURATION
# ================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database_name
DATABASE_URL="postgresql://postgres:your_password@localhost:5432/multi_business_db"

# ================================
# NEXTAUTH CONFIGURATION
# ================================
# Base URL for the application (update for production deployment)
NEXTAUTH_URL="http://localhost:8080"

# Secret key for NextAuth (GENERATE A NEW ONE FOR PRODUCTION!)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-super-secret-key-change-this-in-production"

# ================================
# APPLICATION CONFIGURATION
# ================================
# Environment mode
NODE_ENV="production"

# Port for the application to run on
PORT=8080

# ================================
# SYNC SERVICE CONFIGURATION
# ================================
# Sync service configuration - THESE ARE SERVER-SPECIFIC!
# Each server must have unique values for nodeId, nodeName, and registrationKey

# Unique node identifier (generate with: node -e "console.log(require('crypto').randomBytes(8).toString('hex'))")
SYNC_NODE_ID="generate-unique-per-server"

# Human-readable node name (use hostname or server identifier)
SYNC_NODE_NAME="sync-node-server1"

# Shared registration key for peer authentication (MUST BE SAME ON ALL SERVERS)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SYNC_REGISTRATION_KEY="your-shared-registration-key-all-servers-must-have-same"

# Sync service discovery port (usually 8765)
SYNC_SERVICE_PORT=8765

# HTTP API port for sync operations (usually same as main app port)
SYNC_HTTP_PORT=8080

# Sync interval in milliseconds (30000 = 30 seconds)
SYNC_INTERVAL=30000

# Enable automatic sync service startup
SYNC_AUTO_START=true

# Sync logging level (error, warn, info, debug)
SYNC_LOG_LEVEL="info"

# Maximum sync log file size in bytes (10485760 = 10MB)
SYNC_MAX_LOG_SIZE=10485760

# Maximum number of sync log files to keep
SYNC_MAX_LOG_FILES=5

# ================================
# SYNC SECURITY CONFIGURATION
# ================================
# Enable sync data encryption
SYNC_ENABLE_ENCRYPTION=true

# Enable sync message signatures
SYNC_ENABLE_SIGNATURES=true

# Enable sync key rotation (advanced)
SYNC_KEY_ROTATION_ENABLED=false

# Sync session timeout in milliseconds (3600000 = 1 hour)
SYNC_SESSION_TIMEOUT=3600000

# Maximum failed sync attempts before temporary ban
SYNC_MAX_FAILED_ATTEMPTS=5

# Rate limiting window in milliseconds (60000 = 1 minute)
SYNC_RATE_LIMIT_WINDOW=60000

# Maximum requests per rate limit window
SYNC_RATE_LIMIT_MAX_REQUESTS=100

# ================================
# DATABASE SYNC CONFIGURATION
# ================================
# Maximum database connections for sync operations
SYNC_DB_MAX_CONNECTIONS=20

# Database connection timeout for sync operations
SYNC_DB_CONNECTION_TIMEOUT=30000

# ================================
# WINDOWS SERVICE CONFIGURATION
# ================================
# Windows service name
SERVICE_NAME="multi-business-sync"

# Windows service display name
SERVICE_DISPLAY_NAME="Multi-Business Sync Service"

# Windows service description
SERVICE_DESCRIPTION="Peer-to-peer database synchronization service for multi-business platform"

# Service auto-start on system boot
SERVICE_AUTO_START=true

# Service restart delay in milliseconds after failure
SERVICE_RESTART_DELAY=5000

# Maximum service restart attempts
SERVICE_MAX_RESTARTS=3

# ================================
# LOGGING CONFIGURATION
# ================================
# Application logging level (error, warn, info, debug)
LOG_LEVEL="info"

# Log directory (absolute path or relative to project root)
LOG_DIRECTORY="logs"

# Maximum log file size
LOG_MAX_FILE_SIZE="10MB"

# Maximum number of log files to keep
LOG_MAX_FILES=10

# Enable console logging (set false for production service)
LOG_CONSOLE=false

# ================================
# APPLICATION FEATURES
# ================================
# Maximum file upload size
MAX_FILE_SIZE="10mb"

# Allowed file types for uploads
ALLOWED_FILE_TYPES="image/*,application/pdf"

# Session configuration
SESSION_MAX_AGE=30 # days

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=900 # 15 minutes in seconds

# ================================
# SECURITY SETTINGS (Production Only)
# ================================
# Enable HTTPS redirect (set to true in production with SSL)
FORCE_HTTPS=false

# CORS origins (comma-separated list)
CORS_ORIGINS="http://localhost:3000,http://localhost:8080"

# ================================
# QUICK SETUP EXAMPLES
# ================================
# Server 1 Example:
# SYNC_NODE_ID="a1b2c3d4e5f6g7h8"
# SYNC_NODE_NAME="sync-node-server1"
# SYNC_REGISTRATION_KEY="b3f1c9d7a5e4f2c3819d6b7a2e4f0c1d2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7"

# Server 2 Example:
# SYNC_NODE_ID="z9y8x7w6v5u4t3s2"
# SYNC_NODE_NAME="sync-node-server2"
# SYNC_REGISTRATION_KEY="b3f1c9d7a5e4f2c3819d6b7a2e4f0c1d2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7"

# ================================
# PRODUCTION DEPLOYMENT EXAMPLES
# ================================

# ================================
# OPTIONAL CONFIGURATION
# ================================
# Logging level (error, warn, info, debug)
LOG_LEVEL="info"

# Maximum file upload size
MAX_FILE_SIZE="10mb"

# Allowed file types for uploads
ALLOWED_FILE_TYPES="image/*,application/pdf"

# Session configuration
SESSION_MAX_AGE=30 # days

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=900 # 15 minutes in seconds

# ================================
# SECURITY SETTINGS (Production Only)
# ================================
# Enable HTTPS redirect (set to true in production with SSL)
FORCE_HTTPS=false

# CORS origins (comma-separated list)
CORS_ORIGINS="http://localhost:3000,http://localhost:8080"

# Content Security Policy (uncomment for production)
# CSP_ENABLED=true

# ================================
# BACKUP CONFIGURATION (Optional)
# ================================
# Automatic backup settings
# BACKUP_ENABLED=true
# BACKUP_SCHEDULE="0 2 * * *" # Daily at 2 AM
# BACKUP_RETENTION_DAYS=30

# ================================
# EXTERNAL SERVICES (Optional)
# ================================
# Email service configuration (for notifications)
# EMAIL_PROVIDER="smtp"
# EMAIL_HOST="smtp.gmail.com"
# EMAIL_PORT=587
# EMAIL_USER="your-email@domain.com"
# EMAIL_PASSWORD="your-app-password"

# SMS service configuration (for 2FA)
# SMS_PROVIDER="twilio"
# TWILIO_ACCOUNT_SID="your-account-sid"
# TWILIO_AUTH_TOKEN="your-auth-token"

# ================================
# MONITORING & ANALYTICS (Optional)
# ================================
# Application monitoring
# SENTRY_DSN="your-sentry-dsn"
# NEW_RELIC_LICENSE_KEY="your-newrelic-key"

# Google Analytics
# GA_TRACKING_ID="G-XXXXXXXXXX"

# ================================
# SYNC SERVICE CONFIGURATION
# ================================
# Sync service settings for peer-to-peer synchronization

# Sync service ports
SYNC_SERVICE_PORT=8765
SYNC_HTTP_PORT=8080

# Sync timing settings (milliseconds)
SYNC_INTERVAL=30000
SYNC_SESSION_TIMEOUT=3600000

# Node identification (auto-generated if not provided)
# SYNC_NODE_ID=auto-generated-from-mac-address
# SYNC_NODE_NAME=auto-generated-from-hostname

# Sync security settings
SYNC_REGISTRATION_KEY="your-shared-secret-key-for-sync-authentication"
SYNC_ENABLE_ENCRYPTION=true
SYNC_ENABLE_SIGNATURES=true
SYNC_KEY_ROTATION_ENABLED=false

# Sync behavior settings
SYNC_ENABLE_AUTO_START=true
SYNC_AUTO_RESTART=true
SYNC_RESTART_DELAY=5000
SYNC_MAX_RESTART_ATTEMPTS=5

# Sync security limits
SYNC_MAX_FAILED_ATTEMPTS=5
SYNC_RATE_LIMIT_WINDOW=60000
SYNC_RATE_LIMIT_MAX_REQUESTS=100

# Sync logging settings
SYNC_LOG_LEVEL=info
SYNC_MAX_LOG_SIZE=10485760
SYNC_MAX_LOG_FILES=5
SYNC_LOG_CONSOLE=false

# Sync data directories (absolute paths recommended)
SYNC_DATA_DIRECTORY="./data/sync"
SYNC_LOG_DIRECTORY="./logs"

# ================================
# DEVELOPMENT SETTINGS
# ================================
# Enable debug mode (development only)
DEBUG=false

# Prisma Studio port (development only)
PRISMA_STUDIO_PORT=5555

# ================================
# PRODUCTION DEPLOYMENT EXAMPLES
# ================================

# Example for Vercel deployment:
# DATABASE_URL="postgresql://username:password@host.cloud.provider.com:5432/database"
# NEXTAUTH_URL="https://your-app.vercel.app"
# NEXTAUTH_SECRET="generated-secret-key"

# Example for Heroku deployment:
# DATABASE_URL will be provided automatically by Heroku Postgres addon
# NEXTAUTH_URL="https://your-app.herokuapp.com"
# NEXTAUTH_SECRET="generated-secret-key"

# Example for Docker deployment:
# DATABASE_URL="postgresql://postgres:password@db:5432/business_platform"
# NEXTAUTH_URL="http://localhost:3000"
# NEXTAUTH_SECRET="generated-secret-key"

# ================================
# SECURITY NOTES
# ================================
# 1. Never commit your .env file to version control
# 2. Use strong, unique passwords for database
# 3. Generate a secure NEXTAUTH_SECRET for production
# 4. Update NEXTAUTH_URL to match your production domain
# 5. Enable HTTPS in production environments
# 6. Configure proper CORS origins for production
# 7. Use environment-specific configuration for each deployment